version: '3.8'

services:
  # 백엔드 설정 (aura-connect-backend)
  backend:
    build:
      context: ./aura-connect-backend  # [수정됨] 실제 폴더 이름
      dockerfile: Dockerfile           # Dockerfile이 이 폴더 안에 있어야 함
    container_name: aura-backend
    ports:
      - "8080:8080"
    volumes:
      - ./aura-connect-backend/src:/app/src # [수정됨] 소스 코드 연결
      - ./aura-connect-backend/build.gradle:/app/build.gradle
    environment:
      - SPRING_DEVTOOLS_RESTART_ENABLED=true

  # 프론트엔드 설정 (aura-connect-client)
  frontend:
    build:
      context: ./aura-connect-client   # [수정됨] 실제 폴더 이름
      dockerfile: Dockerfile           # Dockerfile이 이 폴더 안에 있어야 함
    container_name: aura-frontend
    ports:
      - "3000:3000"
    volumes:
      - ./aura-connect-client/src:/app/src # [수정됨] 소스 코드 연결
      - ./aura-connect-client/public:/app/public
      - /app/node_modules
    environment:
      - CHOKIDAR_USEPOLLING=true
    stdin_open: true
    tty: true
    depends_on:
      - backend